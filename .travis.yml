sudo: required
language: generic
matrix:
  include:
  - os: osx
    osx_image: xcode9.2
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
  - os: osx
    osx_image: xcode9.2
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=coverage
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=zpm
    - GCC_VERSION=6
global:
  env:
  - PROJECT=CoreLib
  - PROJECT_DIRECTORY=core
install:
- source /dev/stdin <<< "$(curl -s https://raw.githubusercontent.com/Zefiros-Software/ZPM/dev/script/install-zpm.sh)"
script:
- zpm run build-ci-library
after_success:
- zpm run deploy-ci-library
notifications:
  slack:
    secure: akTPZ7Xm1LBGGD6m7etXoWi0GmJbmNEh1MbsQsQScGwIQBJXVbNNLQCT1Wbw1tY4WCu64HnlcdJ/HWbQkusIBmlNHCkqNL6Hske4DcjicCIvCh0q/nPWDcFFDYr8+SzbM+/YqQYbeV0qWexA4EP+2yBXxU3qjVeIk7DMEjKBqLH5eWhCIQpeK+bEHA8g+qohsDgwwIzau5iF1992AbixnSAnAmLT3y1v+gg5av30bH96G8DOgwYJg8QOfUYxBiY5X0CQHmoq12+BB6mpC4AWGIyq3C/7Tqny4/wBkPfcobFlt8ywl1S4C7h1b52mKQRDff/jZgqoIJcFejFI7YLYHZ76OiHvloADVL3lQsegUO3uiWPHZm/nuTOUIE+2l2QmfFGgLnV3W8cOY+jCGlDc42z2WwFGw0I2kyCvujWrmyKp4sp41YIDNxdPP2jkTnTCAUWcvmxeWQsV6MEAawyUrKskJXAOZoK0xgtiz0+o8VCocJx+ThD3VLaSFT/FbBdHAZsFw+scccK/eq9wwl7GuNTN7sF05jHbGR08LHaChpYqwh9YyXs/pJkDR/3COpEfJRIcpP14Y41u4OgT/vVDuLlyr1IVN8Dgu4+5ZBt9QavbQdQDDwI+B0kJtVNwd2cGyMy4iM+xyKRZr4hhf692p8BVI6mFChxajmRoTDGXcwc=
